{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { AccountPage } from './account';\r\n\r\n@NgModule({\r\n    declarations: [AccountPage],\r\n    imports: [IonicPageModule.forChild(AccountPage)]\r\n})\r\n\r\nexport class AccountPageModule { }\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage } from 'ionic-angular';\r\nimport { NgForm } from '@angular/forms';\r\nimport { NavParams, ViewController, Events } from 'ionic-angular';\r\n\r\n// Providers\r\nimport { AccountService } from '../../providers/account-service';\r\nimport { AuthService } from '../../providers/auth-service';\r\nimport { uiComp } from '../../providers/ui-components';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-account',\r\n  templateUrl: 'account.html',\r\n  providers: [AccountService, AuthService, uiComp]\r\n})\r\n\r\nexport class AccountPage {\r\n\r\n  public modal;\r\n  public createForm = false;\r\n  public emailForm = false;\r\n  public passwordForm = false;\r\n\r\n  public registerCredentials = {\r\n    email: '',\r\n    password: ''\r\n  };\r\n  public emailCredentials = {\r\n    oldEmail: '',\r\n    newEmail: ''\r\n  };\r\n  public passwordCredentials = {\r\n    oldPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  };\r\n\r\n  constructor(public params: NavParams, public viewCtrl: ViewController, public events: Events, private accountSvc: AccountService, private authSvc: AuthService,\r\n    private uiCmp: uiComp) {\r\n\r\n    this.startModal();\r\n    this.checkModal();\r\n  }\r\n\r\n  // ACCOUNT //\r\n  // Create\r\n  public createAccount(form: NgForm) {\r\n    this.authSvc.signUpBasic(form).subscribe(\r\n      (success) => {\r\n        if (success) {\r\n          this.dismiss();\r\n          this.uiCmp.presentToastSuccess('Account created');\r\n        } else {\r\n          this.uiCmp.presentToastError('Problem creating an account');\r\n        }\r\n      },\r\n      (error) => {\r\n        this.uiCmp.presentToastError(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Email\r\n  public changeEmail(form: NgForm) {\r\n    this.accountSvc.changeEmail(form.value).subscribe(\r\n      (data) => {\r\n        this.dismiss();\r\n        this.uiCmp.presentToastSuccess(data.message);\r\n      },\r\n      (error) => {\r\n        if (error.code === undefined) {\r\n          this.uiCmp.presentToastError(error.message);\r\n        }\r\n        if (error.code === 401.1) {\r\n          this.uiCmp.presentToastError(error.message);\r\n        }\r\n        if (error.code === 401.2) {\r\n          this.uiCmp.presentToastError(error.message);\r\n        }\r\n        if (error.code === 401.3) {\r\n          this.uiCmp.presentToastError(error.message);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  // Password\r\n  public changePassword(form: NgForm) {\r\n    var payload = {\r\n        oldPassword: form.value.oldPassword,\r\n        newPassword: form.value.newPassword\r\n    };\r\n    \r\n    if(form.value.oldPassword === form.value.newPassword) {\r\n      this.uiCmp.presentToastError('New password is the same as old one');\r\n    } else if(form.value.newPassword === form.value.confirmPassword) {\r\n        this.accountSvc.changePassword(payload).subscribe(\r\n            (data) => {\r\n                this.logout();\r\n                this.dismiss();\r\n                this.uiCmp.presentToastSuccess(data.message);\r\n            },\r\n            (error) => {\r\n                if (error.code === undefined) {\r\n                    this.uiCmp.presentToastError(error.message);\r\n                }\r\n                if (error.code === 401.1) {\r\n                    this.uiCmp.presentToastError(error.message);\r\n                }\r\n            }\r\n        );\r\n    } else {\r\n        this.uiCmp.presentToastError('New password is not the same as confirm');\r\n    }\r\n  }\r\n\r\n  // Logout\r\n  public logout() {\r\n    this.events.publish('user:logout');\r\n  }\r\n\r\n  // MODALS //\r\n  // Start\r\n  public startModal() {\r\n    var modals = [{\r\n        name: 'Create new account',\r\n        form: 'Create'\r\n      },\r\n      {\r\n        name: 'Change email',\r\n        form: 'Email'\r\n      },\r\n      {\r\n        name: 'Change password',\r\n        form: 'Password'\r\n      }\r\n    ];\r\n    this.modal = modals[this.params.get('modalNum')];\r\n  }\r\n\r\n  // Check\r\n  public checkModal() {\r\n    if (this.modal.form === 'Create') {\r\n      this.createForm = true;\r\n    } else if (this.modal.form === 'Email') {\r\n      this.emailForm = true;\r\n    } else {\r\n      this.passwordForm = true;\r\n    }\r\n  }\r\n\r\n  // Dissmiss\r\n  public dismiss() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}